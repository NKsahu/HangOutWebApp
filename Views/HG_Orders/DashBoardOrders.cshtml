@{
    Layout = null;
}
<div style="width:100%; min-width:100%">
    <h3 style="text-align:center"> Todays Orders</h3>
</div>

<div class="row" style="width:100%">

    <table class="table" id="InvoiceItems">
        <thead>
            <tr>
                <th>ORD NO.</th>
                <th>AMT</th>
                <th>DETAILS</th>
                <th>PAYMENT MODES</th>
            </tr>

        </thead>
        <tbody id="Tbody"></tbody>

    </table>

</div>

<script>
    var OrderList = [];
    var OrgId = 0;
    var PaymentStatus = 0;// unpaid list
    var LoginId = 0;
    var CurrOID = 0;

    function GetOrders(PaymentStatus) {
        var Obj = {};
        Obj.OrgId = OrgId;
        Obj.PayStatus = PaymentStatus;
        $.ajax({
            type: 'POST',
            url: "/WebApi/ShowOrderByStatus?Obj=" + JSON.stringify(Obj),
            success: function (data) {
                OrderList = JSON.parse(data);
                console.log(OrderList);
                if (OrderList.length == 0) {
                    $.alert({
                        title: 'Alert!',
                        content: 'No Order Yet',
                    });
                    return;
                }
                ShowOrders(OrderList);
            },
            error: function (jqXhr, textStatus, errorMessage) { // error callback
                $("#waiting").hide();
            }
        });
    }
    function ShowOrders(list) {
        $("#Tbody").html('');
        var DetailsBtn = "<button type='button' class=' btn-sm btn-success sp-f2-hotkey' ";
        var DeatilsClose = "'>DETAILS</button>";
        var BycashClose = "'>BY CASH</button>";
        var ByOnline = "'>BY ONLINE</button>";
        for (var i = 0; i < list.length; i++) {
            var OID = list[i].OID;
            var html = "<tr id='" + OID + "'><td>" + OID + "</td><td>" + list[i].AMT + "</td><td>";
            html += DetailsBtn + "style='width:100%'" + "onclick='Details(" + OID + ")" + DeatilsClose + "</td><td>";
            html += DetailsBtn + "style='width:50%'" + "onclick='ByCash2(" + OID + ")" + BycashClose + DetailsBtn + "style='width:50%'" + "onclick='ByOnline2(" + OID + ")" + ByOnline + "</td></tr >";
            $("#Tbody").append(html);

        }

    }
    function Details(OID) {
        //HG_OrderItem
        //OID
        $("#waiting").show();
        $.ajax({
            type: 'POST',
            url: "/HG_OrderItem/index?OID=" + OID,
            success: function (data) {
                makedpt("CurrOrder");
                $("#CurrOrder > .modal-dialog > .modal-content > .modal-body").html(data);
                showdpt("CurrOrder");
                $("#waiting").hide();
            },
            error: function (jqXhr, textStatus, errorMessage) { // error callback
                $("#waiting").hide();
            }
        });

    }
    function GenInvoice2() {
        $("#waiting").show();
        $.ajax({
            type: 'POST',
            url: "/HG_Orders/PrintInvoice?OID=" + CurrOID,
            success: function (data) {
                makedpt("invoice");
                $("#invoice > .modal-dialog > .modal-content > .modal-body").html(data);
                showdpt("invoice");
                $("#waiting").hide();
                $("#" + CurrOID).remove();
                CurrOID = 0;
                //var Jobje = JSON.parse(data);
            },
            error: function (jqXhr, textStatus, errorMessage) { // error callback
                $("#waiting").hide();
            }
        });
    }
    function ByCash2(OID) {
        CurrOID = OID;
        $.confirm({
            title: 'BY CASH',
            content: 'Mark Order Completed',
            buttons: {
                btnClass: 'btn-green',
                confirm: function () {
                    CompleteOrder2(1)// bycash
                },
                cancel: function () {
                    // $.alert('Canceled!');
                }
            }
        });

    }
    function ByOnline2(OID) {
        CurrOID = OID;
        $.confirm({
            title: 'BY ONLINE',
            content: 'Mark Order Completed',
            buttons: {
                btnClass: 'btn-green',
                confirm: function () {
                    CompleteOrder2(2)// by online
                },
                cancel: function () {
                    // $.alert('Canceled!');
                }
            }
        });

    }
    function CompleteOrder2(PaymentType) {
        $.ajax({
            type: 'POST',
            url: "/WebApi/CompleteOrder?OID=" + CurrOID + "&PaymentType=" + PaymentType + "&UpdatedBy=" + LoginId,
            success: function (data) {
                var Jobj = JSON.parse(data);
                if (Jobj.Status == 400) {
                    $.alert({
                        title: 'Alert!',
                        content: Jobj.MSG,
                    });
                }
                else {
                    GenInvoice2();
                }

            },
            error: function (jqXhr, textStatus, errorMessage) { // error callback
                $("#waiting").hide();
            }
        });
    }

</script>