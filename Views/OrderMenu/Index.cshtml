@{
    Layout = null;
}
<style>
    div.scrollmenu {
        background-color: #333;
        overflow-x: auto;
        white-space: nowrap;
    }
    
        div.scrollmenu block {
            display: inline-block;
            color: white;
            text-align: center;
            padding: 20px;
            border-left: solid 1px #5de79a;
            text-decoration: none;
        }
    div.scrollTables {
        background-color: white;
        overflow: auto;
        white-space: nowrap;
    }
    div.scrollTables blockTable {
        display: inline-block;
        text-align: center;
       width:35%;
       height:300px;
        border-right: solid 2px #f00;
        text-decoration: none;
    }

        div.scrollmenu a:hover {
            background-color: #777;
        }
</style>

<div class="row" style="width:100%">
    <div class="card-header" style="width:100%">
        <h3 style="text-align:center; background-color:#5de79a"><b>Order Menu</b> </h3>
        <hr />
    </div>
    <div class="scrollmenu" id="Menus">
        <block id="AddNew" onclick="AddOrderMenu(0)">Add New</block>
    </div>

</div>
<div class=" scrollTables" style="padding-top:50px" id="Floor">

    <blockTable>
        <div class="row">
            <div class="col-md-6">
                <h4 style="text-align:right">Floor1</h4>
            </div>
            <div class="col-md-2">
                <input type="checkbox" class=" form-control" style="border: 2px dotted #00f; display: block; background: #ff0000" />
            </div>
            </div>
        <div class="row" id="AddSeat">
            <div class="col-md-3 card" style="padding:5px">Table 1</div>
            <div class="col-md-3 card" style="padding:5px"> Table 2</div>
            <div class="col-md-3 card" style="padding:5px">Table 3</div>
            <div class="col-md-3 card" style="padding:5px">Table 4</div>
            <div class="col-md-3 card" style="padding:5px">Table 5</div>
            <div class="col-md-3 card" style="padding:5px">Table 6</div>
            <div class="col-md-3 card" style="padding:5px">Table 7</div>
            <div class="col-md-3 card" style="padding:5px">Table 8</div>
            <div class="col-md-3 card" style="padding:5px">Table 9</div>
            <div class="col-md-3 card" style="padding:5px">Table 10</div>
        </div>
</blockTable>
    <blockTable>
        <div class="row">
            <div class="col-md-6">
                <h4 style="text-align:right">Floor2</h4>
            </div>
            <div class="col-md-2">
                <input type="checkbox" class=" form-control" style="border: 2px dotted #00f; display: block; background: #ff0000" />
            </div>
        </div>
        <div class="row">
            <div class="col-md-3 card" style="padding:5px">Table 1</div>
            <div class="col-md-3 card" style="padding:5px"> Table 2</div>
            <div class="col-md-3 card" style="padding:5px">Table 3</div>
            <div class="col-md-3 card" style="padding:5px">Table 4</div>
            <div class="col-md-3 card" style="padding:5px">Table 5</div>
            <div class="col-md-3 card" style="padding:5px">Table 6</div>
            <div class="col-md-3 card" style="padding:5px">Table 7</div>
            <div class="col-md-3 card" style="padding:5px">Table 8</div>
            <div class="col-md-3 card" style="padding:5px">Table 9</div>
            <div class="col-md-3 card" style="padding:5px">Table 10</div>
        </div>
    </blockTable>
    <blockTable>
        <div class="row">
            <div class="col-md-6">
                <h4 style="text-align:right">Floor3</h4>
            </div>
            <div class="col-md-2">
                <input type="checkbox" class=" form-control" style="border: 2px dotted #00f; display: block; background: #ff0000" />
            </div>
        </div>
        <div class="row">
            <div class="col-md-3 card" style="padding:5px">Table 1</div>
            <div class="col-md-3 card" style="padding:5px"> Table 2</div>
            <div class="col-md-3 card" style="padding:5px">Table 3</div>
            <div class="col-md-3 card" style="padding:5px">Table 4</div>
            <div class="col-md-3 card" style="padding:5px">Table 5</div>
            <div class="col-md-3 card" style="padding:5px">Table 6</div>
            <div class="col-md-3 card" style="padding:5px">Table 7</div>
            <div class="col-md-3 card" style="padding:5px">Table 8</div>
            <div class="col-md-3 card" style="padding:5px">Table 9</div>
            <div class="col-md-3 card" style="padding:5px">Table 10</div>
        </div>
    </blockTable>
    
</div>
<div class="row">
    <div class="col-md-5">

    </div>
    <div class="col-md-2">
        <button class="btn btn-danger form-control">Apply</button>
    </div>
    <div class="col-md-5">

    </div>
</div>
<script>
    var OrderMenuList = {};
    LoadOrderMenus();
    function LoadOrderMenus() {
        $.ajax({
            type: 'POST',
            url: "/WebApi/OrderMenuList?OrgId=0",
            success: function (data) {
                
                OrderMenuList = JSON.parse(data);
                console.log("AYA");
               // if (OrderMenuList.length > 0) {
                    ShowOrderMenus(OrderMenuList);
               // }
            },
            error: function (jqXhr, textStatus, errorMessage) { // error callback
                $("#waiting").hide();
            }
        });


    }
    function ShowOrderMenus(list) {
        $("#Menus").html('');
        $("#Floor").html('');
        $("#Menus").append('<block id="AddNew" onclick="AddOrderMenu(0)">Add New</block>');
        var MenuList = list.MenuList;
        for (var i = 0; i < MenuList.length; i++) {
            $("#Menus").append('<block onclick="AddOrderMenu(' + MenuList[i].id + ')" id=' + MenuList[i].id + '>' + MenuList[i].MenuName + '</block>');
        }
        var categorylist = list.FloorList;
        
        for (var i = 0; i < categorylist.length; i++) {
            var FloorHtml = '<blockTable><div class="row" ><div class="col-md-6">';
            FloorHtml += '<h4 style="text-align:right">' + categorylist[i].Name + '</h4> </div><div class="col-md-6">';
            FloorHtml += '<input type="checkbox" class=" form-control" style="border: 2px dotted #00f; display: block; background: #ff0000" /></div></div>';
            var TablesOrSheat = ' <div class="row">';
            var TableSHaetList = categorylist[i].TableSheatList;
            //TablesOrSheat = TableSHaetList.length == 0 ? '<div class="row"><div class="col-md-3 card"></div>' : TablesOrSheat;
            for (var j = 0; j < TableSHaetList.length; j++) {
                TablesOrSheat += '<div class="col-md-3 "><p>' + TableSHaetList[j].Table_or_SheetName+'</p></div>';
            }
            TablesOrSheat += "</div>";
            FloorHtml += TablesOrSheat;
            FloorHtml += '</blockTable>';
            $("#Floor").append(FloorHtml);
        }
        
    }

    function AddOrderMenu(OMID) {
        $('#waiting').show();
        $.ajax({
            type: 'GET',
            url: "/OrderMenu/AddMenu?OMId=" + OMID,
            success: function (data) {
                makedpt("AddOrderMenu");
                $("#AddOrderMenu > .modal-dialog > .modal-content > .modal-body").html(data);
                showdpt("AddOrderMenu");

            },
            error: function (jqXhr, textStatus, errorMessage) { // error callback

            }
        });
    }
    $('body').on('click', '.nav-list_item', function () {
        $(this).find('ul').toggle();
        $(this).siblings('li').find('ul').hide();
    });
    function ChangeIcon(event) {
        console.log("aaya");
        if ($(event).find('a').find('i').hasClass('fa-plus')) {
            $(event).find('a').find('i').removeClass('fa-plus');
            $(event).find('a').find('i').addClass('fa-minus');
        }
        else {
            $(event).find('a').find('i').removeClass('fa-minus');
            $(event).find('a').find('i').addClass('fa-plus');
        }
    }

    function RowUp(event) {
        // var li = $(this).closest('li');
        var li = $(event).parent('div').parent('div').parent('li');
        var prev = li.prev();
        if (prev.length) {

            var OrderNoCur = parseInt(li.attr('OrderNo'));
            var OrderNoPre = parseInt(prev.attr('OrderNo'));
            console.log(OrderNoCur);
            li.attr('OrderNo', OrderNoCur - 1);
            prev.attr('OrderNo', OrderNoPre + 1);
            li.detach().insertBefore(prev);
        }
    }
    function RowDown(event) {
        var li = $(event).parent('div').parent('div').parent('li');
        // var li = $(this).closest('li');
        var next = li.next();
        if (next.length) {
            var OrderNoCurr = parseInt(li.attr('OrderNo'));
            var OrderNoNxt = parseInt(next.attr('OrderNo'));
            console.log(OrderNoCurr);
            li.attr('OrderNo', OrderNoCurr + 1);
            next.attr('OrderNo', OrderNoNxt - 1);
            li.detach().insertAfter(next);
        }
    }

</script>

